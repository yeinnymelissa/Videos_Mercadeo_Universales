<div class="container">
    <div *ngIf="opcion == 1">
        <div class="mb-3 row">
            <h3 class="col-sm-7">Actualizar Agrupador</h3>
            <button type="button" class="btn btn-success col-sm-2" (click)="actualizarAgrupadorBoton()" type="submit">Actualizar</button>
            <button type="button" class="btn btn-danger col-sm-2"  (click)="cancelarOperacion()" type="submit">Cancelar</button>
        </div>
        <div class="mb-3 row">
            <label for="staticId" class="col-sm-2 col-form-label">Id</label>
            <div class="col-sm-10">
                <input type="text" readonly class="form-control-plaintext" id="staticId" value={{idAgrupador}}>
            </div>
        </div>
        <div class="mb-3 row">
            <label for="inputNombre" class="col-sm-2 col-form-label">Nombre</label>
            <div class="col-sm-3">
                <input type="text" [(ngModel)]='nombreAgrupador' class="form-control" id="inputNombre" value={{nombreAgrupador}} required="true">
            </div>
        </div>
        <div class="mb-3 row">
            <label for="inputEstado" class="col-sm-2 col-form-label">Estado</label>
            <div class="col-sm-8">
                <p-treeSelect class="md:w-20rem w-full" containerStyleClass="w-full" [(ngModel)]="estadoEleccion" [options]="estadoNodo" placeholder="Seleccione una opcion"></p-treeSelect>
            </div>
        </div>
    </div>
    <div *ngIf="opcion == 2">
        <div class="mb-3 row">
            <h3 class="col-sm-7">Guardar un nuevo agrupador</h3>
            <button type="button" class="btn btn-success col-sm-2" (click)="guardarAgrupadorBoton()" type="submit">Guardar</button>
            <button type="button" class="btn btn-danger col-sm-2"  (click)="cancelarOperacion()" type="submit">Cancelar</button>
        </div>
        <div class="mb-3 row">
            <label for="inputNombre" class="col-sm-2 col-form-label">Nombre</label>
            <div class="col-sm-3">
                <input type="text" [(ngModel)]='nombreAgrupador' class="form-control" id="inputNombre" value={{nombreAgrupador}} required="true">
            </div>
        </div>
        <div class="mb-3 row">
            <label for="inputEstado" class="col-sm-2 col-form-label">Estado</label>
            <div class="col-sm-8">
                <p-treeSelect class="md:w-20rem w-full" containerStyleClass="w-full" [(ngModel)]="estadoEleccion" [options]="estadoNodo" placeholder="Seleccione una opcion"></p-treeSelect>
            </div>
        </div>
    </div>
    <div class="mb-3 row" *ngIf="opcion != 2">
        <div class="col-sm-11"></div>
        <p-button class="col-sm-1" icon="pi pi-plus" type="submit" (click)="guardarAgrupador()"></p-button>
    </div>
    <div class="card">
        <p-table
            [value]="agrupadores"
            [paginator]="true"
            [rows]="5"
            [showCurrentPageReport]="true"
            [tableStyle]="{ 'min-width': '50rem' }"
            currentPageReportTemplate="Mostrando {first} hasta {last} de {totalRecords} entradas"
            [rowsPerPageOptions]="[5, 10, 25]"
        >
            <ng-template pTemplate="header">
                <tr>
                    <th style="width:15%; text-align: center;">Editar</th>
                    <th pSortableColumn="idAgrupador" style="min-width: 14rem">
                        <div class="flex justify-content-between align-items-center">
                            Id
                            <p-sortIcon field="idAgrupador"></p-sortIcon>
                            <p-columnFilter type="text" field="idAgrupador" display="menu" class="ml-auto"></p-columnFilter>
                        </div>
                    </th>
                    <th pSortableColumn="nombre" style="min-width: 14rem">
                        <div class="flex justify-content-between align-items-center">
                            Nombre
                            <p-sortIcon field="nombre"></p-sortIcon>
                            <p-columnFilter type="text" field="nombre" display="menu" class="ml-auto"></p-columnFilter>
                        </div>
                    </th>
                    <th pSortableColumn="estado" style="min-width: 14rem">
                        <div class="flex justify-content-between align-items-center">
                            Estado
                            <p-sortIcon field="estado"></p-sortIcon>
                            <p-columnFilter type="text" field="estado" display="menu" class="ml-auto"></p-columnFilter>
                        </div>
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-agrupadores>
                <tr>
                    <td>
                        <div class="centrar">
                            <p-button icon="pi pi-file-edit" type="submit" (click)="actualizarAgrupador(agrupadores.idAgrupador)"></p-button>
                        </div>
                    </td>
                    <td style="text-align: center;">{{ agrupadores.idAgrupador }}</td>
                    <td>{{ agrupadores.nombre }}</td>
                    <td>{{ this.obtenerEstado(agrupadores.estado)}}</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>